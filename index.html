<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DextersClub SPARK'25 Registration</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body, html {
            margin: 0;
            height: 100%;
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: auto;
            background: linear-gradient(135deg, #ff6f91 0%, #ff9a8b 35%, #f6d365 65%, #fdc647 100%);
            position: relative;
        }
        .animated-lines { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; overflow: hidden; z-index: 0; }
        .line { position: absolute; top: 0; width: 2px; height: 100vh; background: rgba(255, 255, 255, 0.2); animation: slideDown 8s linear infinite; opacity: 0.7; border-radius: 1px; }
        @keyframes slideDown { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }
        .line:nth-child(1)  { left: 5%; animation-delay: 0s;  height: 90vh; }
        .line:nth-child(2)  { left: 15%; animation-delay: 2s; height: 85vh; }
        .line:nth-child(3)  { left: 25%; animation-delay: 4s; height: 92vh; }
        .line:nth-child(4)  { left: 35%; animation-delay: 1.5s; height: 88vh; }
        .line:nth-child(5)  { left: 45%; animation-delay: 3.2s; height: 95vh; }
        .line:nth-child(6)  { left: 55%; animation-delay: 1s; height: 90vh; }
        .line:nth-child(7)  { left: 65%; animation-delay: 0.7s; height: 94vh; }
        .line:nth-child(8)  { left: 75%; animation-delay: 4.5s; height: 85vh; }
        .line:nth-child(9)  { left: 85%; animation-delay: 2.3s; height: 90vh; }
        .line:nth-child(10) { left: 95%; animation-delay: 3.5s; height: 88vh; }

        .form-card { position: relative; z-index: 10; background: rgba(255,255,255,0.93); padding: 2.5rem 2rem 2rem 2rem; border-radius: 1.2rem; box-shadow: 0 8px 32px 0 rgba(246, 134, 177, 0.17); min-width: 360px; max-width: 400px; width: 100%; transition: box-shadow 0.2s; text-align: center; }
        .dexters-header { font-size: 2.1rem; font-weight: bold; margin-bottom: 0.2rem; background: linear-gradient(90deg, #fd6e6a 20%, #fcbe44 60%, #5c7cff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 1.4px; }
        .spark-tag { display: inline-block; margin-bottom: 0.8rem; font-weight: bold; font-size: 1.07rem; padding: 0.19rem 0.85rem; border-radius: 1.5rem; background: linear-gradient(90deg, #f36f89 10%, #ffe47a 80%); color: #1c2753; }
        .form-field { display: flex; flex-direction: column; margin-bottom: 1.1rem; gap: 4px; }
        label { font-weight: 600; color: #fa5a7d; }
        input[type="text"], input[type="tel"] { padding: 0.76rem; border-radius: 0.5rem; border: 2px solid #ffd89b; background: linear-gradient(90deg, #fff 70%, #ffe0c7 100%); font-size: 1rem; margin-top: 2px; transition: border-color 0.22s; }
        input[type="text"]:focus, input[type="tel"]:focus { border-color: #fcbe44; background: #fffde7; }
        .register-btn { width: 100%; padding: 1rem; font-weight: bold; color: #383e51; border-radius: 0.6rem; border: none; background: linear-gradient(90deg, #ff6f91, #fcbe44 80%); font-size: 1.15rem; margin-top: 0.2rem; cursor: pointer; box-shadow: 0 2px 12px 0 rgba(255, 172, 51, 0.11); transition: background 0.16s, transform 0.09s; }
        .register-btn:hover { background: linear-gradient(90deg, #ff9a8b, #ffe47a 80%); transform: scale(1.03); }
        @media (max-width: 520px) { .form-card { padding: 1.2rem; min-width: unset; max-width: 97vw; } }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: #fff; border-radius: 12px; max-width: 500px; width: 90%; padding: 1.5rem 2rem; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 24px rgba(0,0,0,0.2); color: #222; }
        .modal-content h2 { margin-top: 0; margin-bottom: 1rem; color: #fd6e6a; font-weight: 700; }
        .modal-content p, .modal-content ul { line-height: 1.5; margin-bottom: 1rem; }
        .modal-content ul { padding-left: 1.3rem; }
        .modal-content ul li { margin-bottom: 0.5rem; }
        .modal-buttons { text-align: right; }
        .modal-buttons button { background: #fd6e6a; border: none; color: white; padding: 0.6rem 1rem; font-weight: bold; border-radius: 8px; cursor: pointer; margin-left: 1rem; transition: background 0.3s ease; }
        .modal-buttons button:hover { background: #fcbe44; color: #222; }
    </style>
</head>
<body>
    <div class="animated-lines">
        <div class="line"></div><div class="line"></div><div class="line"></div>
        <div class="line"></div><div class="line"></div><div class="line"></div>
        <div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div>
    </div>

    <form id="registrationForm" class="form-card mx-auto mt-5" action="/register" method="POST">
        <div class="dexters-header">DextersClub</div>
        <div class="spark-tag">SPARK'25 CTF Registration</div>

        <div class="form-field"><label for="team">Team Name</label><input type="text" class="form-control" name="team" id="team" required /></div>
        <div class="form-field"><label for="name">Name</label><input type="text" class="form-control" name="name" id="name" required /></div>
        <div class="form-field"><label for="regNo">Register No.</label><input type="text" class="form-control" name="regNo" id="regNo" required /></div>
        <div class="form-field"><label for="dept">Dept.</label><input type="text" class="form-control" name="dept" id="dept" required /></div>
        <div class="form-field"><label for="year">Year</label><input type="text" class="form-control" name="year" id="year" required /></div>
        <div class="form-field"><label for="sec">Section</label><input type="text" class="form-control" name="sec" id="sec" required /></div>
        <div class="form-field"><label for="phone">Phone No.</label><input type="tel" class="form-control" name="phone" id="phone" required pattern="[0-9]{10}" /></div>
        <button type="button" class="register-btn btn btn-primary mt-2" id="btnRegister">Register</button>
    </form>

    <div id="rulesModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <h2 id="modalTitle">Event Rules & Details</h2>
            <p><strong>AlgoTrail</strong> is a thrilling coding adventure where participants must navigate a virtual maze by solving programming challenges of varying difficulty.</p>
            <p><strong>Rules:</strong></p>
            <ul>
                <li>Navigate the maze by solving coding and DSA questions.</li>
                <li>Easy: 2 moves (basic coding, logic, syntax-based problems)</li>
                <li>Medium: 5 moves (intermediate DSA: arrays, recursion, hashing, trees)</li>
                <li>Hard: 8 moves (advanced DSA: graphs, dynamic programming, optimization)</li>
                <li>Submit correct answers to earn movement points.</li>
                <li>Fastest completion wins; the top 3 teams will be on the leaderboard.</li>
                <li>No tab switching, mobile phones, or external assistance allowed.</li>
                <li>Maintain fair play at all times.</li>
                <li>Choose question difficulties strategically balancing speed and accuracy.</li>
            </ul>
            <div class="modal-buttons">
                <button id="btnCancel" type="button">Cancel</button>
                <button id="btnConfirm" type="button">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const btnRegister = document.getElementById('btnRegister');
        const modal = document.getElementById('rulesModal');
        const btnConfirm = document.getElementById('btnConfirm');
        const btnCancel = document.getElementById('btnCancel');
        const form = document.getElementById('registrationForm');

        // Show modal only if form is valid
        btnRegister.addEventListener('click', () => {
            if(form.checkValidity()) {
                modal.style.display = 'flex';
            } else {
                form.reportValidity(); // show validation errors
            }
        });

        // Cancel button hides modal
        btnCancel.addEventListener('click', () => modal.style.display = 'none');

        // Confirm submits the form
        btnConfirm.addEventListener('click', () => {
            modal.style.display = 'none';
            form.submit();
        });

        // Close modal with Escape key
        window.addEventListener('keydown', (e) => {
            if(e.key === "Escape" && modal.style.display === 'flex') {
                modal.style.display = 'none';
            }
        });
    </script>
</body>
</html>